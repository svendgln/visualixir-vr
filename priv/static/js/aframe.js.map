{"version":3,"sources":["aframe/aframeApp.js","aframe/components/clicktest.js","aframe/components/customcontrols.js","aframe/components/debug.js","aframe/components/enterleave.js","aframe/components/menubutton.js","aframe/test.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxFA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhCA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApHA;AAAA","file":"../priv/static/js/aframe.js","sourcesContent":["console.log(\"loading aframe app\");\r\n\r\n// const fs = require('fs');\r\n\r\n// function loadComponents() {\r\n//     const path = './components';\r\n//     let files = fs.readdirSync(path).filter(file => file.endsWith('.js'));\r\n//     console.log(files)\r\n// }\r\n\r\n// temp fix\r\nconst components = ['clicktest.js', 'customcontrols.js', 'debug.js', 'enterleave.js', 'menubutton.js']\r\ncomponents.forEach(c => require(`./components/${c}`))\r\n\r\nrequire('./test.js');\r\n","\r\nAFRAME.registerComponent('clicktest', {\r\n    init: function () {\r\n        console.log('CLICK INIT');\r\n        var el = this.el;\r\n        el.addEventListener('click', evt => {\r\n            console.log(el);\r\n            console.log('trigger pressed');\r\n            el.setAttribute('visible', !el.getAttribute('visible'));\r\n        });\r\n    }\r\n})","AFRAME.registerComponent('custom-controls', {\r\n    schema: {\r\n        cameraRig: { type: 'selector', default: '#cameraRig' }, \r\n        camera: { type: 'selector', default: '#camera' },\r\n        speed: { type: 'number', default: 0.1 },\r\n        controllerLeft: { 'type': 'selector', default: '#controllerLeft' },\r\n        controllerRight: { 'type': 'selector', default: '#controllerRight' }\r\n    },\r\n\r\n    init: function () {\r\n        console.log('custom controls loaded');\r\n        const el = this.el; //probs not needed\r\n        const self = this;\r\n        this.timer = 0;\r\n        this.quat = new THREE.Quaternion();\r\n        this.vecZ = new THREE.Vector3(0, 0, -1); //forward direction of camera -z\r\n        this.vecX = new THREE.Vector3(1, 0, 0); // x axis for sideways movement\r\n        this.axis = [0, 0]; //controller trackpad x,z axis\r\n\r\n\r\n        // controller events\r\n        // trigger\r\n        controllerLeft.addEventListener('triggerdown', evt => {\r\n            console.log('LEFT TRIGGER');\r\n\r\n        });\r\n        controllerRight.addEventListener('triggerdown', evt => {\r\n            console.log('RIGHT TRIGGER');\r\n        });\r\n\r\n        // grip button\r\n        controllerLeft.addEventListener('gripdown', evt => {\r\n            console.log('LEFT GRIP');\r\n        });\r\n\r\n        controllerRight.addEventListener('gripdown', evt => {\r\n            console.log('RIGHT GRIP');\r\n        });\r\n\r\n        // menu button\r\n        controllerLeft.addEventListener('menudown', evt => {\r\n            console.log('LEFT MENU');\r\n        });\r\n\r\n        controllerRight.addEventListener('menudown', evt => {\r\n            console.log('RIGHT MENU');\r\n            //call this.somefunction toggle menu idk\r\n        });\r\n\r\n        // trackpad\r\n        controllerLeft.addEventListener('axismove', evt => {\r\n            //position on trackpad, x,z values [-1,1]\r\n            const axis = evt.detail.axis;\r\n            this.axis = axis;\r\n        });\r\n\r\n        //right trackpad: use click and axis location to create arrow key functionality?.. for.. something..\r\n    },\r\n\r\n    tick: function (time, timeDelta) {\r\n        const vecX = this.vecX;\r\n        const vecZ = this.vecZ;\r\n\r\n        const pos = this.data.cameraRig.object3D.position;\r\n        //camera rotation quaternion\r\n        this.quat.copy(this.data.camera.object3D.quaternion);\r\n        //apply to direction vectors\r\n        vecZ.applyQuaternion(this.quat);\r\n        vecX.applyQuaternion(this.quat);\r\n\r\n        // scale vecs with speed scalar, add to position..\r\n        const axis = this.axis;\r\n        const axisX = axis[0] * this.data.speed;\r\n        const axisZ = axis[1] * this.data.speed;\r\n        // length 1\r\n        vecZ.normalize();\r\n        vecX.normalize();\r\n        // closer to edge of trackpad = faster\r\n        vecZ.multiplyScalar(axisZ);\r\n        vecX.multiplyScalar(axisX);\r\n\r\n        pos.add(vecZ);\r\n        // add x component of vecX to position: only vecZ changes height\r\n        this.data.cameraRig.object3D.position.set(pos.x + vecX.getComponent(0), pos.y, pos.z);\r\n        // reset NEEDED?\r\n        this.vecZ.set(0, 0, -1);\r\n        this.vecX.set(1, 0, 0);\r\n    }\r\n});","\r\nAFRAME.registerComponent('testing', {\r\n    schema: {\r\n        cameraRig: { type: 'selector', default: '#cameraRig' },\r\n        camera: { type: 'selector', default: '#camera' }\r\n    },\r\n    init: function () {\r\n        console.log('testing component loaded');\r\n        this.timer = 0;\r\n    },\r\n    tick: function (time, timeDelta) {\r\n        this.timer += timeDelta\r\n        if (this.timer > 1000) {\r\n            this.timer = 0\r\n            //console.log('log test')\r\n            //TEST\r\n            const rot = this.data.camera.object3D.rotation;\r\n            const quat = this.data.camera.object3D.quaternion;\r\n\r\n            const line = document.querySelectorAll('#LINE');\r\n            var vecz = new THREE.Vector3(0, 0, -1);\r\n            var vecx = new THREE.Vector3(1, 0, 0);\r\n            vecx.applyQuaternion(quat); //cam rotation\r\n            vecz.applyQuaternion(quat);\r\n            line.forEach(l => {\r\n                l.object3D.rotation.setFromQuaternion(quat);\r\n            });\r\n            //var currentPos = this.data.cameraRig.object3D.position;\r\n            //currentPos.add(vecz);\r\n            //console.log(this.data.cameraRig.object3D.position, currentPos);\r\n        }\r\n    }\r\n});","// component needed?\r\nAFRAME.registerComponent('enterleave', {\r\n    init: function () {\r\n        var el = this.el;\r\n        console.log(this.el);\r\n        console.log('enter/leave');\r\n        el.addEventListener('enterleave', function (evt) {\r\n            console.log('(╯°□°）╯︵ ┻━┻')\r\n        })\r\n    }\r\n})","console.log('MENU BUTTON LOADED');\r\nAFRAME.registerComponent('menu-button', {\r\n    init: function () {\r\n        const el = this.el;\r\n        // DOESNT WORK AFTER FIRST CLICK\r\n        el.setAttribute('animation__click', {\r\n            property: 'scale',\r\n            from: { x: 1, y: 1, z: 1 },\r\n            to: { x: 1.1, y: 1.1, z: 1.1 },\r\n            startEvents: 'click',\r\n            dur: 200,\r\n            easing: 'linear'\r\n        });\r\n\r\n        el.setAttribute('animation__resetclick', {\r\n            property: 'scale',\r\n            to: { x: 1, y: 1, z: 1 },\r\n            from: { x: 1.1, y: 1.1, z: 1.1 },\r\n            startEvents: 'click',\r\n            dur: 200,\r\n            delay: 200,\r\n            easing: 'linear'\r\n        });\r\n    }\r\n});","console.log('test loaded');\r\n\r\nconst DATA = [\r\n    { x: 10, y: 10 },\r\n    { x: 2, y: 2 },\r\n    { x: 4, y: 4 },\r\n    { x: 6, y: 6 },\r\n    { x: 8, y: 8 }\r\n];\r\n\r\ndocument.querySelector('a-scene #d3-container')\r\n    .addEventListener('loaded', console.log('el loaded'))\r\n\r\n// old tests\r\nfunction renderData() {\r\n\r\n    d3.select('a-scene').select('#d3-container').selectAll('a-entity')\r\n        .data(DATA)\r\n        .enter()\r\n        .append('a-entity')\r\n        .attr('geometry', function (d, i) {\r\n            return `primitive: sphere; radius: 1`\r\n        })\r\n        .attr('position', function (d, i) {\r\n            console.log('adding sphere on pos', d.x, d.y);\r\n            return `${d.x} 1 ${d.y}`\r\n        })\r\n        .attr('material', function (d, i) {\r\n            return `shader: standard; color: red`\r\n        });\r\n}\r\n\r\n\r\n// test force simulation:\r\nconst nodes = [{ test: 'lol' }, {}, {}, {}, {}];\r\nconst linksOLD = [\r\n    { source: 0, target: 1 },\r\n    { source: 1, target: 2 },\r\n    { source: 2, target: 3 },\r\n    { source: 3, target: 4 }\r\n];\r\n\r\nconst links = [\r\n    { source: 0, target: 3 },\r\n    { source: 2, target: 4 },\r\n]\r\n\r\n// temp testing function\r\nfunction addNode() {\r\n    nodes.unshift({});\r\n    sim.nodes(nodes);\r\n    sim.alpha(1).restart();\r\n}\r\n\r\nfunction addLink(source, target) {\r\n    if (source && target) {\r\n        let link = {source: source.index, target: target.index}\r\n        links.push(link)\r\n        console.log(links)\r\n        sim.force('link').links(links);\r\n        // no check if exists..\r\n        sim.alpha(1).restart();\r\n   }\r\n}\r\n\r\nconst sim = d3.forceSimulation(nodes)\r\n    .force('charge', d3.forceManyBody().strength(-10)) //default\r\n    .force('center', d3.forceCenter(0, 0))\r\n    .force('link', d3.forceLink().distance(1).links(links))\r\n    .force('x', d3.forceX().strength(0.5))\r\n    .force('y', d3.forceY().strength(0.5))\r\n    .velocityDecay(0.2)\r\n    .alphaDecay(0.02)\r\n    .on('tick', ticked);\r\n\r\n\r\nfunction ticked() {\r\n    const container = d3.select('a-scene').select('#d3-nodes')\r\n        .selectAll('a-entity')\r\n        .data(nodes)\r\n        .join('a-entity')\r\n        .attr('geometry', function (d, i) {\r\n            return `primitive: sphere; radius: 1`\r\n        })\r\n        .attr('position', function (d, i) {\r\n            return `${d.x} 1 ${d.y}`\r\n        })\r\n        .attr('material', function (d, i) {\r\n            return `shader: standard; color: red`\r\n        });\r\n\r\n    let test = d3.select('#d3-links').selectAll('a-entity').data(links, d => `${d.source}-${d.target}`)\r\n        .join('a-entity');\r\n        test.attr('line', function (d, i) {\r\n            let source = nodes[d.source.index];\r\n            let target = nodes[d.target.index];\r\n            //console.log(d);\r\n            return `start: ${source.x} 0 ${source.y}; end: ${target.x} 0 ${target.y}; color: green`\r\n        });\r\n\r\n    // links.enter()\r\n    //     .append('a-entity')\r\n    //     .attr('line', function (d, i) {\r\n    //         let source = nodes[d.source];\r\n    //         let target = nodes[d.target];\r\n    //         return `start: ${source.x} 0 ${source.y}; end: ${target.x} 0 ${target.y}; color: green`\r\n    //     })\r\n}\r\n\r\nfunction test() {\r\n    console.log('adding node..');\r\n    addNode();\r\n    setTimeout(() => console.log('adding link..'), 1000);\r\n    setTimeout(() => addLink(nodes[0], nodes[5]), 1000);\r\n}\r\n//..\r\ndocument.test = test;"]}